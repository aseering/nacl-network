<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Native Client: NPAPI Extensions</title>
    <link href="./tabs.css" rel="stylesheet" type="text/css">
    <link href="./stylesheet-dox.css" rel="stylesheet" type="text/css">
    <link href="./stylesheet-dox-all.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div id="toplinks">
      <a href="../../../README.html">Back to README</a>
    </div>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>NPAPI Extensions<br>
<small>
[<a class="el" href="group___libraries.html">Libraries</a>]</small>
</h1>NPAPI extensions for Native Client applications.  
<a href="#_details">More...</a>
<p>
<h2>Defines</h2>
<ul>
<li>#define <a class="el" href="group___n_p_a_p_i.html#g5dee191d2b26cf475548a1b457c5abb9">NPVARIANT_IS_HANDLE</a>(_v)&nbsp;&nbsp;&nbsp;((int) (_v).type == (int) NPVariantType_Handle)
<li>#define <a class="el" href="group___n_p_a_p_i.html#g459664576fcda88255509f58063d58d3">NPVARIANT_TO_HANDLE</a>(_v)&nbsp;&nbsp;&nbsp;((_v).value.intValue)
<li>#define <a class="el" href="group___n_p_a_p_i.html#g4e0431a369926d94b6d2111de30e930c">HANDLE_TO_NPVARIANT</a>(_val, _v)
</ul>
<h2>Enumerations</h2>
<ul>
<li>enum { <b>NPVariantType_Handle</b> =  127
 }
</ul>
<h2>Functions</h2>
<ul>
<li>int <a class="el" href="group___n_p_a_p_i.html#g2b50007e7c4ff16360fa0294d1c6e67e">NaClNP_Init</a> (int *argc, char *argv[])
<li>int <a class="el" href="group___n_p_a_p_i.html#gce42ffe1c1097900d0e06a4ff65bd329">NaClNP_MainLoop</a> (unsigned flags)
<li>NPObject * <a class="el" href="group___n_p_a_p_i.html#g3e9da12acf670310f474861e000e88f5">NaClNPN_CreateArray</a> (NPP npp)
<li>NPError <a class="el" href="group___n_p_a_p_i.html#ge62ca6fdaea647612ddbaf635b621a8b">NaClNPN_OpenURL</a> (NPP npp, const char *url, void *notify_data, void(*notify)(const char *url, void *notify_data, int handle))
<li>NPObject * <a class="el" href="group___n_p_a_p_i.html#gd6b92f15011abb6dde0ae16e86f46ed7">NPP_GetScriptableInstance</a> (NPP instance)
</ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
NPAPI extensions for Native Client applications. 
<p>
Native Client supports a <a href="../../../documentation/npapi.html">subset of NPAPI</a>, plus these extensions. To learn about NPAPI, see <a href="http://developer.mozilla.org/en/Plugins">http://developer.mozilla.org/en/Plugins</a> and <a href="http://developer.mozilla.org/en/Gecko_Plugin_API_Reference.">http://developer.mozilla.org/en/Gecko_Plugin_API_Reference.</a><p>
To use this API, include <code>&lt;<a class="el" href="nacl__npapi_8h.html" title="Defines the API in the NPAPI Extensions.">nacl/nacl_npapi.h</a>&gt;</code> and link with the <code>google_nacl_npruntime</code> library.<p>
<b>Note:</b> NPAPI support is experimental. If you encounter security issues, bugs, or missing features, please <a href="http://code.google.com/p/nativeclient/issues">file an issue</a>. <hr><h2>Define Documentation</h2>
<a class="anchor" name="g4e0431a369926d94b6d2111de30e930c"></a><!-- doxytag: member="nacl_npapi.h::HANDLE_TO_NPVARIANT" ref="g4e0431a369926d94b6d2111de30e930c" args="(_val, _v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HANDLE_TO_NPVARIANT          </td>
          <td>(</td>
          <td class="paramtype">_val,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_v&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">NP_BEGIN_MACRO \
    (_v).type = (NPVariantType) NPVariantType_Handle; \
    (_v).value.intValue = _val; \
    NP_END_MACRO
</pre></div>[Native Client] Sets a NaCl resource descriptor to an NPVariant. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>_val</em>&nbsp;</td><td>The NaCl resource descriptor to set. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>_v</em>&nbsp;</td><td>The NPVariant value. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g5dee191d2b26cf475548a1b457c5abb9"></a><!-- doxytag: member="nacl_npapi.h::NPVARIANT_IS_HANDLE" ref="g5dee191d2b26cf475548a1b457c5abb9" args="(_v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NPVARIANT_IS_HANDLE          </td>
          <td>(</td>
          <td class="paramtype">_v&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((int) (_v).type == (int) NPVariantType_Handle)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Checks whether the NPVariant holds a NaCl resource descriptor. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>_v</em>&nbsp;</td><td>The NPVariant value. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Non-zero value if the NPVariant holds a NaCl resource descriptor; otherwise, 0. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g459664576fcda88255509f58063d58d3"></a><!-- doxytag: member="nacl_npapi.h::NPVARIANT_TO_HANDLE" ref="g459664576fcda88255509f58063d58d3" args="(_v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NPVARIANT_TO_HANDLE          </td>
          <td>(</td>
          <td class="paramtype">_v&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((_v).value.intValue)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Gets a NaCl resource descriptor from an NPVariant. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>_v</em>&nbsp;</td><td>The NPVariant value. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The NaCl resource descriptor. </dd></dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g2b50007e7c4ff16360fa0294d1c6e67e"></a><!-- doxytag: member="nacl_npapi.h::NaClNP_Init" ref="g2b50007e7c4ff16360fa0294d1c6e67e" args="(int *argc, char *argv[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NaClNP_Init           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>argv</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Initializes the NPAPI bridge RPC runtime. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>argc</em>&nbsp;</td><td>Pointer to the program's unmodified argc variable from main(). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>argv</em>&nbsp;</td><td>The program's unmodified argv variable from main(). </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 upon success; otherwise, -1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gce42ffe1c1097900d0e06a4ff65bd329"></a><!-- doxytag: member="nacl_npapi.h::NaClNP_MainLoop" ref="gce42ffe1c1097900d0e06a4ff65bd329" args="(unsigned flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int NaClNP_MainLoop           </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>flags</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Enters the NPAPI bridge RPC processing loop. 
<p>
<a class="el" href="group___n_p_a_p_i.html#gce42ffe1c1097900d0e06a4ff65bd329" title="[Native Client] Enters the NPAPI bridge RPC processing loop.">NaClNP_MainLoop()</a> should be called once after <a class="el" href="group___n_p_a_p_i.html#g2b50007e7c4ff16360fa0294d1c6e67e" title="[Native Client] Initializes the NPAPI bridge RPC runtime.">NaClNP_Init()</a> is called successfully. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Reserved. Use 0. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 upon success; otherwise, -1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g3e9da12acf670310f474861e000e88f5"></a><!-- doxytag: member="nacl_npapi.h::NaClNPN_CreateArray" ref="g3e9da12acf670310f474861e000e88f5" args="(NPP npp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NPObject* NaClNPN_CreateArray           </td>
          <td>(</td>
          <td class="paramtype">NPP&nbsp;</td>
          <td class="paramname"> <em>npp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Creates a JavaScript array object. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>npp</em>&nbsp;</td><td>Pointer to the plug-in instance. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Pointer to the new JavaScript array object, or NULL on failure. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ge62ca6fdaea647612ddbaf635b621a8b"></a><!-- doxytag: member="nacl_npapi.h::NaClNPN_OpenURL" ref="ge62ca6fdaea647612ddbaf635b621a8b" args="(NPP npp, const char *url, void *notify_data, void(*notify)(const char *url, void *notify_data, int handle))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NPError NaClNPN_OpenURL           </td>
          <td>(</td>
          <td class="paramtype">NPP&nbsp;</td>
          <td class="paramname"> <em>npp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>notify_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(const char *url, void *notify_data, int handle)&nbsp;</td>
          <td class="paramname"> <em>notify</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Gets a file descriptor for the specified URL. 
<p>
On success, the notify function will be called back. If the file specified by the URL has been successfully opened, the handle argument for the notify function will be set to a valid file descriptor; otherwise, it will be set to -1. This function enforces cross-domain access restrictions.<p>
Note: <a class="el" href="group___n_p_a_p_i.html#ge62ca6fdaea647612ddbaf635b621a8b" title="[Native Client] Gets a file descriptor for the specified URL.">NaClNPN_OpenURL()</a> returns an error when another <a class="el" href="group___n_p_a_p_i.html#ge62ca6fdaea647612ddbaf635b621a8b" title="[Native Client] Gets a file descriptor for the specified URL.">NaClNPN_OpenURL()</a> operation is in progress in background. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>npp</em>&nbsp;</td><td>Pointer to the plug-in instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>url</em>&nbsp;</td><td>Pointer to the URL of the request. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>notify_data</em>&nbsp;</td><td>Plug-in private value for associating the request with the subsequent notify call. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>notify</em>&nbsp;</td><td>Pointer to a callback function to be called upon successful call to the function. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NPERR_NO_ERROR if successful; otherwise, an error code. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gd6b92f15011abb6dde0ae16e86f46ed7"></a><!-- doxytag: member="nacl_npapi.h::NPP_GetScriptableInstance" ref="gd6b92f15011abb6dde0ae16e86f46ed7" args="(NPP instance)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NPObject* NPP_GetScriptableInstance           </td>
          <td>(</td>
          <td class="paramtype">NPP&nbsp;</td>
          <td class="paramname"> <em>instance</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Returns a scriptable object pointer that corresponds to NPPVpluginScriptableNPObject queried by NPP_GetValue(). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>instance</em>&nbsp;</td><td>Pointer to the plug-in instance. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A scriptable object pointer if the module is scriptable, or NULL if not. </dd></dl>

</div>
</div><p>
</div>
    <p id="license">
    Except as otherwise
    <a href="http://code.google.com/policies.html#restrictions">noted</a>,
    the content of this page is licensed under a
    <a href="http://www.google.com/url?sa=D&amp;q=http%3A%2F%2Fcreativecommons.org/licenses/by/2.5/">Creative Commons
    Attribution 2.5 license</a>.
    </p>

    <address>
    &copy;2009 Google
    </address>

    <address>
    Generated 29 Oct 2009 by
    <a href="http://www.doxygen.org/index.html">doxygen</a> 1.5.7.1
    </address>

  </body>
</html>
