<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Native Client: Basic Multimedia Interface</title>
    <link href="./tabs.css" rel="stylesheet" type="text/css">
    <link href="./stylesheet-dox.css" rel="stylesheet" type="text/css">
    <link href="./stylesheet-dox-all.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div id="toplinks">
      <a href="../../../README.html">Back to README</a>
    </div>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Basic Multimedia Interface<br>
<small>
[<a class="el" href="group___libraries.html">Libraries</a>]</small>
</h1>Contains function calls for performing basic audio, video, and event polling.  
<a href="#_details">More...</a>
<p>
<h2>Functions</h2>
<ul>
<li>int <a class="el" href="group__audio__video.html#g145fd3b396d0122f11e273201e84543a">nacl_multimedia_init</a> (int subsystems)
<li>int <a class="el" href="group__audio__video.html#gb392dde91af52c6f69af69699234a119">nacl_multimedia_shutdown</a> ()
<li>int <a class="el" href="group__audio__video.html#g09cec6d68f093511038e3f92483baa17">nacl_multimedia_is_embedded</a> (int *embedded)
<li>int <a class="el" href="group__audio__video.html#g3b8a041d74f1d24edada08a112a68e03">nacl_multimedia_get_embed_size</a> (int *width, int *height)
<li>int <a class="el" href="group__audio__video.html#g62d563b30b5296e8e117e3f77f88725f">nacl_video_init</a> (int width, int height)
<li>int <a class="el" href="group__audio__video.html#ge106a31aae2fc01d6aade334786ef5b8">nacl_video_shutdown</a> ()
<li>int <a class="el" href="group__audio__video.html#g4ae51b5619e5e60fee5c3e4062aaac51">nacl_video_update</a> (const void *data)
<li>int <a class="el" href="group__audio__video.html#g8f38aa7b2f01c6960a4dcbd14c1de02b">nacl_video_poll_event</a> (union NaClMultimediaEvent *event)
<li>int <a class="el" href="group__audio__video.html#g11dec99b448d5433aa043aace813c156">nacl_audio_init</a> (enum NaClAudioFormat format, int desired_samples, int *obtained_samples)
<li>int <a class="el" href="group__audio__video.html#g9d6a289664a9f4963e69ea851d4e95aa">nacl_audio_shutdown</a> ()
<li>int <a class="el" href="group__audio__video.html#g474fdbc576c18d0a0450b8a8e36a319e">nacl_audio_stream</a> (const void *data, size_t *size)
</ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Contains function calls for performing basic audio, video, and event polling. 
<p>
All functions except <a class="el" href="group__audio__video.html#g474fdbc576c18d0a0450b8a8e36a319e" title="[Native Client] Streams audio data to device.">nacl_audio_stream()</a> should be called only from the main thread.<p>
To use this API, include <code>&lt;<a class="el" href="nacl__av_8h.html" title="Defines the API in the Basic Multimedia Interface.">nacl/nacl_av.h</a>&gt;</code> and link with the <code>av</code> library. <hr><h2>Function Documentation</h2>
<a class="anchor" name="g11dec99b448d5433aa043aace813c156"></a><!-- doxytag: member="nacl_av.h::nacl_audio_init" ref="g11dec99b448d5433aa043aace813c156" args="(enum NaClAudioFormat format, int desired_samples, int *obtained_samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nacl_audio_init           </td>
          <td>(</td>
          <td class="paramtype">enum NaClAudioFormat&nbsp;</td>
          <td class="paramname"> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>desired_samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>obtained_samples</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Initializes audio subsystem. 
<p>
<a class="el" href="group__audio__video.html#g145fd3b396d0122f11e273201e84543a" title="[Native Client] Initializes the multimedia system.">nacl_multimedia_init()</a> with the NACL_SUBSYSTEM_AUDIO flag must be called before this function. This function should be called from the same thread that initialized the multimedia system.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>format</em>&nbsp;</td><td>the desired audio format; NACL_AUDIO_FORMAT_STEREO_44K or NACL_AUDIO_FORMAT_STEREO_48K </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>desired_samples</em>&nbsp;</td><td>the desired number of samples for each buffer </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>obtained_samples</em>&nbsp;</td><td>the obtained number of samples for each buffer. Note that this might differ from desired_samples. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 on failure (sets errno appropriately -- if errno is ENODATA then no event was pending; other values of errno indicate failure.) </dd></dl>

</div>
</div><p>
<a class="anchor" name="g9d6a289664a9f4963e69ea851d4e95aa"></a><!-- doxytag: member="nacl_av.h::nacl_audio_shutdown" ref="g9d6a289664a9f4963e69ea851d4e95aa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nacl_audio_shutdown           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Shuts down the audio subsystem. 
<p>
If the application made a successful call to <a class="el" href="group__audio__video.html#g11dec99b448d5433aa043aace813c156" title="[Native Client] Initializes audio subsystem.">nacl_audio_init()</a>, it must call <a class="el" href="group__audio__video.html#g9d6a289664a9f4963e69ea851d4e95aa" title="[Native Client] Shuts down the audio subsystem.">nacl_audio_shutdown()</a> before calling <a class="el" href="group__audio__video.html#gb392dde91af52c6f69af69699234a119" title="[Native Client] Shuts down the multimedia system.">nacl_multimedia_shutdown()</a>. This function should be called from the same thread that initialized the audio subsystem.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 on failure (sets errno appropriately) </dd></dl>

</div>
</div><p>
<a class="anchor" name="g474fdbc576c18d0a0450b8a8e36a319e"></a><!-- doxytag: member="nacl_av.h::nacl_audio_stream" ref="g474fdbc576c18d0a0450b8a8e36a319e" args="(const void *data, size_t *size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nacl_audio_stream           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Streams audio data to device. 
<p>
Call from a dedicated audio pthread. Input data is streamed out to the audio device. Then, this function will sleep the thread until the audio device is ready for the next chunk of audio data. Upon waking up, the function returns the size for the next chunk of audio data.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>source data, 2 channels, 16 bits per channel. The expected size of this data is the size argument returned by the previous call to <a class="el" href="group__audio__video.html#g474fdbc576c18d0a0450b8a8e36a319e" title="[Native Client] Streams audio data to device.">nacl_audio_stream()</a>. On the first call to <a class="el" href="group__audio__video.html#g474fdbc576c18d0a0450b8a8e36a319e" title="[Native Client] Streams audio data to device.">nacl_audio_stream()</a>, this argument is ignored. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>size</em>&nbsp;</td><td>number of data bytes to feed the next call to <a class="el" href="group__audio__video.html#g474fdbc576c18d0a0450b8a8e36a319e" title="[Native Client] Streams audio data to device.">nacl_audio_stream()</a>. Returned size guaranteed not to be larger than kNaClAudioBufferLength. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 on failure (sets errno appropriately) </dd></dl>

</div>
</div><p>
<a class="anchor" name="g3b8a041d74f1d24edada08a112a68e03"></a><!-- doxytag: member="nacl_av.h::nacl_multimedia_get_embed_size" ref="g3b8a041d74f1d24edada08a112a68e03" args="(int *width, int *height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nacl_multimedia_get_embed_size           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>height</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Gets width &amp; height of embedded region in the browser. 
<p>
Non-embedded applications return a width &amp; height of 0.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>width</em>&nbsp;</td><td>width of application region in browser. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>height</em>&nbsp;</td><td>height of application region in browser.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 on failure (sets errno appropriately) </dd></dl>

</div>
</div><p>
<a class="anchor" name="g145fd3b396d0122f11e273201e84543a"></a><!-- doxytag: member="nacl_av.h::nacl_multimedia_init" ref="g145fd3b396d0122f11e273201e84543a" args="(int subsystems)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nacl_multimedia_init           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>subsystems</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Initializes the multimedia system. 
<p>
Should be called from the main thread.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>subsystems</em>&nbsp;</td><td>a bit set consisting of NACL_SUBSYSTEM_VIDEO, and/or NACL_SUBSYSTEM_AUDIO. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 on failure (sets errno appropriately) </dd></dl>

</div>
</div><p>
<a class="anchor" name="g09cec6d68f093511038e3f92483baa17"></a><!-- doxytag: member="nacl_av.h::nacl_multimedia_is_embedded" ref="g09cec6d68f093511038e3f92483baa17" args="(int *embedded)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nacl_multimedia_is_embedded           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>embedded</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Whether or not the nacl app is embedded in the browser. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>embedded</em>&nbsp;</td><td>set to 0 if not embedded, 1 if embedded.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 on failure (sets errno appropriately) </dd></dl>

</div>
</div><p>
<a class="anchor" name="gb392dde91af52c6f69af69699234a119"></a><!-- doxytag: member="nacl_av.h::nacl_multimedia_shutdown" ref="gb392dde91af52c6f69af69699234a119" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nacl_multimedia_shutdown           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Shuts down the multimedia system. 
<p>
Successfully initialized subsystems must be shut down prior to making this call. This functio should be called from the same thread that initialized the multimedia system.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 on failure (sets errno appropriately) </dd></dl>

</div>
</div><p>
<a class="anchor" name="g62d563b30b5296e8e117e3f77f88725f"></a><!-- doxytag: member="nacl_av.h::nacl_video_init" ref="g62d563b30b5296e8e117e3f77f88725f" args="(int width, int height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nacl_video_init           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>height</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Initializes a video output window. 
<p>
A Native Client application can have only one window open at a time. <a class="el" href="group__audio__video.html#g145fd3b396d0122f11e273201e84543a" title="[Native Client] Initializes the multimedia system.">nacl_multimedia_init()</a> with the NACL_SUBSYSTEM_VIDEO flag must be called before this function. This function should be called from the same thread that initialized the multimedia system.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>width</em>&nbsp;</td><td>width of output window in pixels </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>height</em>&nbsp;</td><td>height of output window in pixels </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 on failure (sets errno appropriately) </dd></dl>

</div>
</div><p>
<a class="anchor" name="g8f38aa7b2f01c6960a4dcbd14c1de02b"></a><!-- doxytag: member="nacl_av.h::nacl_video_poll_event" ref="g8f38aa7b2f01c6960a4dcbd14c1de02b" args="(union NaClMultimediaEvent *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nacl_video_poll_event           </td>
          <td>(</td>
          <td class="paramtype">union NaClMultimediaEvent *&nbsp;</td>
          <td class="paramname"> <em>event</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Polls a nacl video window for user events. 
<p>
This function should be called from the same thread that initialized the video subsystem.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>event</em>&nbsp;</td><td>filled in with a valid event on success. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, event data is valid. -1 on failure, no event pending. (sets errno appropriately) </dd></dl>

</div>
</div><p>
<a class="anchor" name="ge106a31aae2fc01d6aade334786ef5b8"></a><!-- doxytag: member="nacl_av.h::nacl_video_shutdown" ref="ge106a31aae2fc01d6aade334786ef5b8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nacl_video_shutdown           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Shuts down and closes video output window. 
<p>
If the application made a successful call to <a class="el" href="group__audio__video.html#g62d563b30b5296e8e117e3f77f88725f" title="[Native Client] Initializes a video output window.">nacl_video_init()</a>, it must call <a class="el" href="group__audio__video.html#ge106a31aae2fc01d6aade334786ef5b8" title="[Native Client] Shuts down and closes video output window.">nacl_video_shutdown()</a> before calling <a class="el" href="group__audio__video.html#gb392dde91af52c6f69af69699234a119" title="[Native Client] Shuts down the multimedia system.">nacl_multimedia_shutdown()</a>. This function should be called from the same thread that initialized the video subsystem.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 on failure (sets errno appropriately) </dd></dl>

</div>
</div><p>
<a class="anchor" name="g4ae51b5619e5e60fee5c3e4062aaac51"></a><!-- doxytag: member="nacl_av.h::nacl_video_update" ref="g4ae51b5619e5e60fee5c3e4062aaac51" args="(const void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nacl_video_update           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Native Client] Updates the video window with new frame buffer data. 
<p>
This function should be called from the same thread that initialized the video subsystem.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>framebuffer data, in source format and size specified in <a class="el" href="group__audio__video.html#g62d563b30b5296e8e117e3f77f88725f" title="[Native Client] Initializes a video output window.">nacl_video_init()</a>. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, -1 on failure (sets errno appropriately) </dd></dl>

</div>
</div><p>
</div>
    <p id="license">
    Except as otherwise
    <a href="http://code.google.com/policies.html#restrictions">noted</a>,
    the content of this page is licensed under a
    <a href="http://www.google.com/url?sa=D&amp;q=http%3A%2F%2Fcreativecommons.org/licenses/by/2.5/">Creative Commons
    Attribution 2.5 license</a>.
    </p>

    <address>
    &copy;2009 Google
    </address>

    <address>
    Generated 29 Oct 2009 by
    <a href="http://www.doxygen.org/index.html">doxygen</a> 1.5.7.1
    </address>

  </body>
</html>
